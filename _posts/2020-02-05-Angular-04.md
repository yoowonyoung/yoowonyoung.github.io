---
layout: post
title: "Angular Study - 03 라우터로 네비게이션 구현하기 -1"
description: 3장 라우터로 네비게이션 구현하기 1번째
date: 2020-02-05 23:01:00 +09:00
categories: Angular Study
---




# 라우터로 네비게이션 구현하기

## 라우터
- SPA는 첫 페이지 상태, 상품 정보 상태, 배송 조회 상태와 같이 특정 뷰가 표시되고 있는 상태를 모두 모아둔것
- 이를 이용해 한 페이지에 머물며 각각의 상태에 맞는 뷰를 표시 할 수 있는데, 이을 사용 하려면 라우터 영역(outlet)을 `<router-outlet>`이라는 태그로 지정하고 SPA의 상태에 따라 다른 뷰를 표시 할 수 있도록 설정해야 한다
- SPA가 아닌 웹 사이트에서는 주소가 바뀔 때마다 새로운 페이지 요청을 서버로 보내고, 결과인 HTML을 받아 브라우저에서 전체 페이지를 다시 렌더링 하는 비효율적인 과정을 사용한다

### 위치 정책(Location strategy)
- 브라우저의 주소 표시줄은 언제나 현재 뷰의 URL을 표시하고, 이러한 URL의 문자가 하나만 바뀌더라도 서버에서는 새로운 요청으로 처리된다
- SPA는 서버에 요청을 보내지 않고도 URL 변경이 가능하기 때문에, 애플리케이션 에서는 이 주소를 기준으로 클라이언트의 상황에 맞는 뷰를 표시 할 수 있다
- Angular 에서 주소를 관리하는 위치 정책은 다음과 같다
    * HashLocationStrategy(해시 기반 내비게이션 정책) - URL에 # 를 사용해 해시기호 이후의 부분은 웹 페이지의 특정 부분을 가르키도록 라우팅 하는 정책이다. 이는 오래된 웹브라우저에서도 가능하다
    * PathLocationStrategy(방문 기록 API 기반 내비게이션 정책) - 브라우저의 방문 기록 API를 사용하는 정책이며, HTML5를 지원하는 브라우저에서만 가능하고, Angular의 기본 정책이다
- 해시 기반의 네비게이션
    * 해시 기반의 네비게이션은 `http://mysite.com:8080/#/products/page/3` 과 같은 형식의 URL 형식을 사용한다
    * 해시기호 오른쪽의 문자를 바꿔도 서버로 요청이 가지 않으며, 그 경로에 해당하는 뷰가 표시 된다
    * 해시기호는 기본이 되는 URL 부분과 클라이언트에서 요구하는 콘텐츠 위치에 대한 경로를 분리하는 용도로 사용된다
- 방문 기록 API 기반의 내비게이션
    * 브라우저의 방문 기록 API를 사용하면 방문 기록 스택을 조작해서 이전 위치로 이동하거나, 새로운 위치로 이동 할 수 있다
    * API중 하나인 pushState() 함수를 사용하면 기본 URL 뒤에서 SPA에서 사용하는 내비게이션 정보를 추가 할 수 있다
    * `http://mysite.com:8080/products/page/3` 에서 `products/page/3` 부분이 기본 URL인 `http://mysite.com:8080`에 추가된 정보이며, 3페이지에서 4페이지로 이동 할 경우, 애플리케이션은 이전 페이지인 `products/page/3` 상태를 브라우저 방문기록에 저장한 후,
    `products/page/4`에 해당하는 뷰를 랜더링 한다
    * Angular를 사용하면 pushState() 함수를 따로 호출 할 필요 없이, URL과 컴포넌트를 매핑하기만 하면 된다
    * 하지만 이를 위해 기본 URL 위치로 어떤 위치를 사용할지 Angular 애플리케이션에서 지정해야 하며, 그에 대한 설정은 다음과 같다
        + index.html 파일의 헤더에 `<base href="/">` 와 같은 형식으로 `<base>`태그를 추가 한다
        + Angular 루트 모듈의 providers 프로퍼티 값을 APP_BASE_HREF로 지정한다

        ```javascript
        import { APP_BASE_HREF } from '@angular/common';
        ...
        @NgModule({
            ...
            providers : [{ provide : APP_BASE_HREF, useValue : '/' }]
        })
        class AppModule {}
        ```

### 라우터 구성 요소







  

