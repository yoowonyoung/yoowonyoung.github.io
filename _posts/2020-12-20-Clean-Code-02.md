---
layout: post
title: "Clean Code 03 : 함수"
description: Clena Code 3장 - 함수
date: 2020-12-20 16:50:00 +09:00
categories: CleanCode Study
---

# 작게 만들어라
- 함수를 만드는 첫번쨰 규칙: 작게 만들어라
- 함수를 만드는 두번쨰 규칙: 더 작게 만들어라
- 얼마나 짧아야 좋은지에 대해서 정확한 근거를 제시하긴 힘들지만 짦게 짜면 좋다
- if/else문, while문등에 들어가는 블록은 한줄 이여야 한다. 들여쓰기 수준이 1단이나 2단을 넘어서면 안된다는것이다

# 한 가지만 해라
- 오래된 프로그래밍 충고: 함수는 한가지를 해야 한다. 그 한가지를 잘해야 한다. 그 한가지만을 해야 한다
- '한 가지'가 무엇을 의미하는지 알기 어려울 수도 있다. 지정된 함수 이름 아래에서 추상화 수준이 하나인 단계만 수행 한다면, 그 함수는 한가지만을 하는 것이다

# 함수당 추상화 수준은 하나로
- 함수가 확실히 한가지 작업만 하려면 함수 내 모든 문장의 추상화 수준이 동일해야 한다
- 코드는 위에서 아래로 이야기처럼 읽혀야 좋다. 한 함수 다음에는 추상화 수준이 한단게 낮은 함수가 오는 형식이다
- switch문은 작게 만들기 어려운데, 본질적으로 한가지 작업만 처리하는게 아니라 N가지 작업을 처리하고 있기 때문이다. 불행하게도 switch문을 완전히 피할 방법은 없지만, 각 switch문을 저차원 클래스에 숨기고 다형성을 이용함으로 반복하지 않는 방법도 있다

# 서술적인 이름을 사용하라!
- 코드를 읽으면서 짐작했던 기능을 각 루틴이 그대로 수행 한다면 꺠끗한 코드라고 불러도 좋다
- 한 가지만 하는 작은 함수에 좋은 이름을 붙인다면 이런 원칙을 달성함에 있어 이미 절반은 성공 한것이다
- 이름은 길어도 괜찮다. 길고 서술적인 이름이 짧고 어려운 이름보다 좋다
- 함수 이름을 정할 떄에는 여러 단어가 쉽게 읽히는 명명법을 사용 한다. 그런 다음 여러 단어를 사용해 함수 기능을 잘 표현하는 이름을 선택 한다
- 서술적인 이름을 사용 하면 개발자 머릿속에서도 설계가 뚜렷해지므로 코드를 개선 하기도 쉬워진다
- 이름을 붙일 떄에는 일관성이 있어야 한다. 모듈 내에서 함수 이름은 같은 문구, 명사, 동사를 사용한다

# 함수 인수
- 함수에서 이상적인 인수 개수는 0개이다. 그 다음이 1개이고, 그 다음이 2개이다
- 4개 이상은 특별한 이유가 필요 하며, 특별한 이유가 있어도 사용하면 안된다
- 인수는 개념을 이해하기 어렵게 만든다. 또한 테스트 관점에서도 인수는 테스트를 작성하기 더 어렵게 만든다
- 많이 쓰는 단항 형식
    + 인수에 질문을 던지는 경우: ```boolean fileExists("MyFile")```
    + 인수를 뭔가로 변환해 결과를 반환하는 경우: ```InputStream fileOpen("MyFile")```
    + 다소 드물게 사용하는 이벤트 함수 역시 유용하다. 이벤트 함수는 입력 인수만 있고 출력 인수는 없는데, 프로그램이 함수호출을 이벤트로 해석해 입력 인수로 시스템의 상태를 바꾼다

- 플래그 인수
    + 함수로 부울값을 넘기는 관례는 정말 끔찍하다. 함수가 한꺼번에 여러가지 일을 처리 한다고 공표하는 셈이기 때문이다. 이런 함수는 2개로 나눠야 마땅하다

- 이항 함수
    + 인수가 2개인 함수는 인수가 1개인 함수보다 이해하기 어렵다
    + 물론 이항 함수가 적절한 경우도 있다. 좌표계 같은 경우가 그런 경우이다
    + 이항 함수가 무조건저긍로 나쁘다는것은 아니다. 하지만 그만큼 위험이 따른다는 사실을 이해하고 가능한 단항 함수로 바꾸도록 애써야 한다

- 인수 객체
    + 인수가 2~3개 필요 하다면, 일부를 독자적인 클래스 변수로 선언할수 있는지 확인 해보라

- 인수 목록
    + 떄로는 인수 개수가 가변적인 함수도 필요 한데, ```String.format```이 대표적인 예 이다
    + 가변 인수를 전부 동등하게 취급하면 List형 인수 하나로 취급 할 수 있다. 이러한 논리 대로라면 ```String.format```은 사실 이항함수이다

- 동사와 키워드
    + 함수의 의도나 인수의 순서와 의도를 제대로 표현 하려면 좋은 함수 이름이 필수다
    + 단항 함수는 함수와 인수가 동사/명사 쌍을 이뤄야 한다

# 부수 효과를 일으키지 마라!
- 부수 효과는 거짓말이다. 함수에서 한가지를 하겠다고 약속 하고서는 남몰래 다른 일을 하는것이기 떄문이다!

# 명령과 조회를 분리 하라
- 함수는 뭔가를 수행하거나 뭔가에 답하거나 줄중 하나만 해야 한다. 둘다 하면 안된다
- 객체 상태를 변경하거나 아니면 객체 정보를 반환하거나 줄중 하나다. 둘다 하면 혼란을 초래 한다

# 오류 코드보다 예외를 사용 해라
- 명령 함수에서 오류 코드를 반환하는 방식은 명령/조회 분리 규칙을 미묘하게 위반한다
- 오류 코드를 반환하면 호출자는 오류코드를 곧바로 처리 해야 한다는 문제에 부딛히기 떄문이다
- 반면 오류 코드 대신 예외를 사용하면 오류 처리 코드가 원래 코드에서 분리되므로 깔끔 해진다
- try/catch 블록은 코드 구조에 혼란을 일으키기 떄문에, 정상 동작과 오류 처리 동작이 뒤섞여 추해진다. try/catch 블록도 별도 함수로 뽑는게 좋다
- 오류 처리도 한가지 작업 이기 떄문에, 오류를 처리하는 함수는 오류만 처리해야 마땅하다

# 반복하지 마라
- 반복되는 알고리즘은 코드 길이가 늘어 날 뿐더러, 알고리즘이 변하면 여러곳을 변경 해야 한다는 문제를 가지고 있다
- 이러한 중복을 없애면 모듈의 가독성도 크게 올라간다
- 중복은 모든 소프트웨어에서 모든 악의 근원이다. OOP, AOP, COP 모두 중복 제거 전략인것이다

# 구조적 프로그래밍
- 구조적 프로그래밍이란 모든 함수와 함수 내 모든 블록에 입구와 출구는 하나만 존재 해야 하고, 루프 안에서 break나 continue를 사용해서는 안되며 goto는 절대로 안된다는 규칙을 말한다
- 이러한 구조적 프로그래밍의 목표와 규율은 공감 하지만, 함수가 작다면 위 규칙은 별다른 이익을 제공하지 못한다. 함수가 아주 클 떄만 상당한 이익을 제공한다
- 함수를 작게 만든다면 return, break, continue를 여러차례 사용 해도 괜찮다


