---
layout: post
title: "Clean Architecture 11장 - 의식적으로 지름길 사용하기"
description: Clean Architecture 11장 
date: 2022-01-11 22:24:00 +09:00
categories: Clean Architecture Study
---

# 의식적으로 지름길 사용하기

## 왜 지름길은 꺠진 창문 같을까
- 품질이 떨어진 코드에서 작업할때 더 낮은 품질의 코드를 추가하기 쉽다
- 코딩 규칙을 많이 어긴 코드에서 작업할떄 또 다른 규칙을 어기기도 쉽다
- 지름길을 많이 사용한 코드에서 작업할때 또 다른 지름길을 추가하기도 쉽다

## 꺠끗한 상태로 시작할 책임
- 지름길을 취하는게 더 실용적일 떄도 있다. 작업중인 부분이 프로젝트 전체로 봣을떄 그리 중요하지 않은 부분이거나, 프로토 타이핑 작업 중이거나, 경제적인 이유가 있을수 있다
- 이러한 의도적 지름길에 대해서는 세심하게 기록 해둬야 한다

## 유스케이스간 모델 공유하기
- 유스케이스간 입출력 모델을 공유하는것은 유스케이스들이 기능적으로 묶여있을때 유효하다. 즉 특정 요구사항을 공유할떄는 괜찮다. 이 경우 특정 세부사항을 변경할 경우 실제로 두 유스케이스 모두에 영향을 주고싶은것
- 두 유스케이스가 서로간에 미치는 영향 없이 독립적으로 진화해야 한다면 입출력 모델을 공유하는 방식은 지름길이 된다

## 도메인 엔티티를 입출력 모델로 사용하기
- 간단한 생성이나 업데이트 유스케이스에서는 유스케이스 인터페이스에 도메인 엔티티가 있는것이 괜찮을지도 모른다. 데이터베이스에 저장해야 하는 바로 그 상태 정보가 엔티티에 있기 때문이다
- 하지만 유스케이스가 단순히 데이터베이스의 필드 몇개를 업데이트 하는 수준이 아니라 더 복잡한 도메인 로직을 구현해야 한다면, 유스케이스 인터페이스에 대한 전용 입출력 모델을 만들어야 한다
- 이 지름길은 많은 유스케이스가 간단한 생성 또는 업데이트 유스케이스로 시작해서 시간이 지나면서 복잡한 도메인 로직 괴물이 되어간다는 사실에 위험하다

## 인커밍 포트 건너뛰기
- 인커밍 포트는 의존성 역전에 필수적인것은 아니다. 하지만 인커밍 포트는 애플리케이션 중심에 접근하는 진입점으로, 이를 제거하면 특정 유스케이스를 구현하기 위해 어떤 서비스 메서드를 호출해야할지 알아야 하므로, 애플리케이션 내부 동작을 더 잘 알아야 한다는 문제가 생김
- 인커밍 포트를 강제하면 아키텍처를 쉽게 강제할수 있다는 장점도 있다
- 애플리케이션의 규모가 작거나 인커밍포트가 하나 뿐이라면 인커밍 포트가 없는게 편하지만, 언제까지고 어플리케이션의 규모가 작을 일은 없을 것이다

## 어플리케이션 서비스 건너뛰기
- 간단한 CRUD 유스케이스에서는 보통 어플리케이션 서비스가 도메인 로직 없이 CRUD 요청을 영속성 어댑터에 그대로 전달하기 떄문에 구미가 당긴다
- 하지만 이 방법은 인커밍 어댑터와 아웃고잉 어댑터 사이에 모델을 공유 해야 하므로, 앞서 이야기한 도메인 모델이 입력 모델로 사용되는것이다
- 나아가 어플리케이션 코어에 유스케이스라고 말할만한것이 없어질수도 있다

## 유지보수 가능한 소프트웨어를 만드는데 어떻게 도움이 될까
- 경제적인 관점에서 지름길이 합리적일떄도 있지만, 지름길을 사용한 결과에 대해서도 잘 알고 있어야 한다
- 어떤 경우든 아키텍처에 대해, 그리고 왜 특정 지름길을 사용 하였는가에 대해 기록을 남겨야 한다
