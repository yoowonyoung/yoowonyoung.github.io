<!DOCTYPE html>
<html lang=" en "><head>
  <meta charset="utf-8">
  <title>Wonyoung yoo - Software Engineer</title>
  <meta http-equip="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Software Engineer and Amateur Photographer">
  <link rel="stylesheet" href="https://yoowonyoung.github.io/devlopr-starter/assets/css/main.css" />
  <link rel="stylesheet" href="https://yoowonyoung.github.io/devlopr-starter/assets/css/custom-style.css" />
  <link rel="icon" href="https://yoowonyoung.github.io/devlopr-starter/assets/img/favicon.ico" type="image/gif" sizes="16x16">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
    integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
    crossorigin="anonymous"></script>
  <script async defer src="https://buttons.github.io/buttons.js"></script>
  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css"
    integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css"
    integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">
  <!-- Including Snipcart -->
  <link rel="stylesheet" href="https://cdn.snipcart.com/themes/v3.0.0-beta.3/default/snipcart.css" />
  <!-- Including InstantSearch.js library and styling -->
  <script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.20.1/moment.min.js"></script>
  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">
  <link rel="stylesheet" type="text/css"
    href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch.min.css">
  <link rel="stylesheet" type="text/css"
    href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch-theme-algolia.min.css">
  <script>
    (function (d, h, m) {
      var js, fjs = d.getElementsByTagName(h)[0];
      if (d.getElementById(m)) { return; }
      js = d.createElement(h); js.id = m;
      js.onload = function () {
        window.makerWidgetComInit({
          position: "right",
          widget: "ofeeof264otl2l5g-zspk40eq2gaomj2n-higi2qphmveubksi"
        })
      };
      js.src = "https://makerwidget.com/js/embed.js";
      fjs.parentNode.insertBefore(js, fjs)
    }(document, "script", "dhm"))
  </script>

  

</head><body>
    <div class="container-fluid"><header>

    <div class="col-lg-12">
        <div class="row">
            <div class="col-md-2 center">
                <a href="/">
                    <img src="/assets/img/profile.jpg" class="profile-img">
                </a>
            </div>
          
            <div class="col-md-4" id="author_details">
                <h1 class="profile-name"> Wonyoung yoo</h1>
                <p class="profile-bio"> Software Engineer</p>
                <p class="profile-links">
                    
                    
                    
                    <a class="social-link" href="http://instagram.com/dnjsdud0105">
                        <i class="fab fa-instagram"></i>
                    </a>
                    
                    
                    
                    <a class="social-link" href="http://github.com/yoowonyoung">
                        <i class="fab fa-github"></i>
                    </a>
                    
                    
                    
                    <a class="social-link" href="http://linkedin.com/in/원영-유-2b2147121">
                        <i class="fab fa-linkedin-in"></i>
                    </a>
                    
                    
                </p>

            </div>
            <div class="col-md-6 center">
     
                    <ul class="nav justify-content-end" id="navigation">
                    
                    <li class="nav-item">
                        <a class="nav-link" href="/">About</a>
                    </li>
                     
                    <li class="nav-item">
                        <a class="nav-link" href="/blog">Blog</a>
                    </li>
                     
                    <li class="nav-item">
                        <a class="nav-link" href="/shop">Shop</a>
                    </li>
                     
                    <li class="nav-item">
                        <a class="nav-link" href="/sample-page">Sample Page</a>
                    </li>
                     
                    <li class="nav-item">
                        <a class="nav-link" href="/contact">Contact Me</a>
                    </li>
                     
                     <li class="nav-item">
                         <a class="nav-link" href="https://yoowonyoung.github.io/search/"><i class="fa fa-search" aria-hidden="true"></i></a>
                     </li>
                     <li class="nav-item">
                         <button class="header__checkout snipcart-checkout">

                                <svg width="31" height="27" viewBox="0 0 31 27" fill="none" xmlns="http://www.w3.org/2000/svg">
                                  <path
                                    d="M1.10512 0.368718C0.560256 0.368718 0.118164 0.812066 0.118164 1.35848C0.118164 1.9049 0.560256 2.34824 1.10512 2.34824H4.90887L8.30138 18.4009C8.43503 19.0053 8.83085 19.5079 9.32946 19.5041H25.7788C26.3005 19.5118 26.7799 19.0375 26.7799 18.5143C26.7799 17.9911 26.3006 17.5168 25.7788 17.5245H10.1315L9.71003 15.545H27.095C27.5371 15.5412 27.9547 15.2048 28.0511 14.7718L30.354 4.87412C30.4825 4.29933 29.9852 3.67172 29.3979 3.66786H7.21171L6.6771 1.15221C6.58329 0.71276 6.15921 0.368652 5.7107 0.368652L1.10512 0.368718ZM7.623 5.64746H12.7634L13.2569 8.61674H8.25005L7.623 5.64746ZM14.7785 5.64746H20.9881L20.4946 8.61674H15.2719L14.7785 5.64746ZM23.0031 5.64746H28.1537L27.4649 8.61674H22.5097L23.0031 5.64746ZM8.67181 10.5963H13.5862L14.0797 13.5656H9.29919L8.67181 10.5963ZM15.6009 10.5963H20.1656L19.6721 13.5656H16.0944L15.6009 10.5963ZM22.1807 10.5963H27.0023L26.3135 13.5656H21.6872L22.1807 10.5963ZM12.6197 20.164C10.8141 20.164 9.32979 21.6525 9.32979 23.4632C9.32979 25.2739 10.8141 26.7624 12.6197 26.7624C14.4252 26.7624 15.9095 25.2739 15.9095 23.4632C15.9095 21.6525 14.4252 20.164 12.6197 20.164ZM22.4892 20.164C20.6837 20.164 19.1994 21.6525 19.1994 23.4632C19.1994 25.2739 20.6837 26.7624 22.4892 26.7624C24.2948 26.7624 25.7791 25.2739 25.7791 23.4632C25.7791 21.6525 24.2948 20.164 22.4892 20.164ZM12.6197 22.1435C13.3586 22.1435 13.9356 22.7222 13.9356 23.4632C13.9356 24.2042 13.3586 24.7829 12.6197 24.7829C11.8807 24.7829 11.3037 24.2042 11.3037 23.4632C11.3037 22.7222 11.8807 22.1435 12.6197 22.1435ZM22.4892 22.1435C23.2282 22.1435 23.8052 22.7222 23.8052 23.4632C23.8052 24.2042 23.2282 24.7829 22.4892 24.7829C21.7503 24.7829 21.1733 24.2042 21.1733 23.4632C21.1733 22.7222 21.7503 22.1435 22.4892 22.1435Z"
                                    fill="#9094FF" class="header__checkout-fill"></path>
                                </svg>
                                <span class="snipcart-items-count"></span>
                                <!-- <span class="snipcart-total-price"></span> -->
                              </button>
                        </li>
                    </ul>
      
            </div>
        </div>
    </div>

</header><div class="col-lg-12">
          
            <!-- Blog Post Breadcrumbs --><nav aria-label="breadcrumb" role="navigation">
        <ol class="breadcrumb">
            <li class="breadcrumb-item">
                <a href="/blog">Blog</a>
            </li>
            <li class="breadcrumb-item">
                <a href="/blog/categories">Categories</a>
            </li>
            <li class="breadcrumb-item active" aria-current="page">Kotlin Study - 10 애노테이션과 리플렉션 -1</li>
        </ol>
    </nav>
<div class="row">

        <div class="col-lg-8"><article class="card" itemscope itemtype="http://schema.org/BlogPosting">
    <div class="card-header">
        <!-- <h1 class="post-title" itemprop="name headline">Kotlin Study - 10 애노테이션과 리플렉션 -1</h1> -->
        <h4 class="post-meta"></h4>
        <p class="post-summary">Posted by :  at
            <time datetime="2019-09-04 21:10:00 +0000" itemprop="datePublished">Sep 4, 2019</time>
        </p>
        <span class="disqus-comment-count" data-disqus-identifier="/kotlin/study/2019/09/04/Kotlin-18/"></span>     
        <div class="post-categories">
            
            Category : 
            <a href="/devlopr-starter/blog/categories/kotlin">kotlin</a>
            &nbsp; 
            <a href="/devlopr-starter/blog/categories/study">study</a>
             
        </div>
    </div>

    <div class="card-body" itemprop="articleBody">
        <img class="card-img-top" src="/assets/img/posts/" alt=""> 
        <br/> <br/>
        <h1 id="애노테이션과-리플렉션">애노테이션과 리플렉션</h1>

<h2 id="애노테이션-선언과-적용">애노테이션 선언과 적용</h2>

<h3 id="애노테이션-적용">애노테이션 적용</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import org.junit.*
class MyTest {
  @Test fun testTrue() {
    Assert.assertTrue(true)
  }
}
</code></pre></div></div>

<ul>
  <li>코틀린에서도 java와 같이 적용하려는 대상 앞에 애노테이션을 붙이는 것으로 애노테이션 적용이 가능 하다</li>
  <li>
    <p>애노테이션에 인자를 넘길 떄에도 일반 함수와 마찬 가지로 괄호 안에 인자를 넣는 것으로 가능하다</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@Deprecated("Use removeAt(index) instead.", ReplaceWith("removeAt(index)"))
fun remove(index : Int) {...}
</code></pre></div>    </div>
  </li>
  <li>위의 @Deprecated 예시를 보면 ReplaceWith를 통해 새로 대신할 패턴을 제시 함을 볼 수 있다. 이는 코틀린만의 기능이다</li>
  <li>하지만 애노테이션 인자를 지정하는 문법은 java와 약간 다르다
    <ul>
      <li>클래스를 애노테이션 인자로 지정 할 때에는 @MyAnnotation(MyClass::class) 처럼 ::class를 클래스 이름 뒤에 넣어야 한다</li>
      <li>다른 애노테이션을 인자로 지정 할 때에는 인자로 들어가는 애노테이션 앞에 @를 넣지 않아야 한다</li>
      <li>배열을 인자로 지정 하려면 @RequestMapping(path=arrayOf(“/foo”,”/bar”)) 처럼 arrayOf를 써야한다.</li>
      <li>애노테이션 인자를 컴파일 시점에 알수 있어야 하기 때문에, 임의의 프로퍼티를 인자로 지정 할 수는 없다</li>
    </ul>
  </li>
</ul>

<h3 id="애노테이션-대상">애노테이션 대상</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import org.junit.*
class HasTempFolder {
  @get:Rule
  val folder = TemporaryFolder()
  
  @Test
  fun testUsingTempFolder() {
    val createdFile = folder.newFile("myfile.txt")
    val createdFolder = folder.newFolder("subfolder")
    ...
}
</code></pre></div></div>

<ul>
  <li>코틀린 소스코드에서 한 선언을 컴파일한 결과가 여러 자바 선언과 대응하는 경우가 자주 있다</li>
  <li>이럴때 코틀린 선언과 대응하는 여러 자바 선언에 각각 애노테이션을 붙여야 한다</li>
  <li>사용 지점 대상 선언으로 애노테이션을 붙일 요소를 정할 수 있으며, 사용 지점 대상은 @ 기호와 애노테이션 이름 사이에 붙으며 : 으로 구분한다</li>
  <li>위의 코드에서 @Rule 애노테이션을 프로퍼티 게터에 적용 하라는 뜻이다</li>
  <li>사용 지점 대상을 지정할 떄 지원하는 대상 목록은 다음과 같다
    <ul>
      <li>property : 프로퍼티 전체, 자바에서 선언된 애노테이션에는 이 사용 지점 대상을 사용 할 수 없다</li>
      <li>field : 프로퍼티에 의해 생성되는 필드</li>
      <li>get : 프로퍼티 게터</li>
      <li>set : 프로퍼티 세터</li>
      <li>reveiver : 확장 함수나 프로퍼티 수신 객체 파라미터</li>
      <li>param : 생성자 파라미터</li>
      <li>setparam : 세터 파라미터</li>
      <li>delegate : 위임 프로퍼티의 위임 인스턴스를 담아둔 필드</li>
      <li>file : 파일 안에 선언된 최상위 함수와 프로퍼티를 담아두는 클래스</li>
    </ul>
  </li>
</ul>

<h3 id="애노테이션을-활용한-json-직렬화-제어">애노테이션을 활용한 JSON 직렬화 제어</h3>
<ul>
  <li>애노테이션을 활용하는 대표적인 예제로 객체 직렬화 제어를 들 수 있다.</li>
  <li>직렬화를 할때 대표적으로 많이 사용되는 JSON을 직접 만들어 보면서 알아보자</li>
  <li>
    <p>먼저 객체를 직렬화 할 때에는 serialize, 역직렬화 할때에는 deserialize함수를 호출하며, deserialize할 때에는 타입 인자를 넘겨야 한다</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>data class Person(val name: String, val age: Int)
val person = Person("Alice",29)
println(serialize(person))
==&gt; {"age":29, "name":"Alice" }
val json = """{"name":"Alice","age":29}"""
perintln(deserialize&lt;Person&gt;(json))
==&gt; Person(name=Alice,age=29)
</code></pre></div>    </div>
  </li>
  <li>@JsonExclude 애노테이션을 활용해 직렬화나 역직렬화시 그 프로퍼티를 무시 할 수 있다</li>
  <li>
    <p>@JsonName 애노테이션으로 프로퍼티를 표현하는 키/값 쌍의 키로 프로퍼티 이름 대신 애노테이션이 지정한 이름을 쓸 수 있다</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>data class Person (
  @JsonName("alice") val firstName: String,
  @JsonExclude val age: Int? = null
}
</code></pre></div>    </div>
  </li>
  <li>이제 애노테이션을 어떻게 하는지 알아보자</li>
</ul>

<h3 id="애노테이션-선언">애노테이션 선언</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>annotation class JsonExclude
annotation class JsonName(val name: String)

java code
public @interface JsonName {
  String value();
}
</code></pre></div></div>

<ul>
  <li>애노테이션 선언 구문은 일반 클래스선언 구문과 거의 비슷하며 class 키워드 앞에 annotation 이라는 변경자가 붙어 있다</li>
  <li>하지만 애노테이션 클래스는 오직 선언이나 식과 관련이 있는 메타 데이터의 구조를 정의하기 때문에, 내부에는 코드가 존재 할 수 없다</li>
  <li>자바 애노테이션에서는 value 메소드를 사용하며, 어떤 애노테이션을 적용할 때 value를 제외함 모든 애트리뷰트에는 항상 이름이 있어야 한다</li>
</ul>

<h3 id="메타애노테이션-애노태이션을-처리하는-방법-제어">메타애노테이션: 애노태이션을 처리하는 방법 제어</h3>
<ul>
  <li>애노테이션 클래스에 적용 가능한 애노테이션을 메타 애노테이션이라고 한다</li>
  <li>표준 라이브러리에 있는 가장 흔히 쓰이는 메타 애노테이션은 @Target이며, 이는 애노테이션을 적용할수 있는 요소의 유형을 지정한다</li>
  <li>
    <p>애노테이션이 붙을 수 있는 대상이 정의된 enum은 AnnotationTaget 이며, 클래스, 파일, 프로퍼티, 프로퍼티 접근자, 타입, 식등에 대한 enum정의가 있다</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@Target(AnnotationTarget.PROPERTY)
annotation class JsonExlcude
</code></pre></div>    </div>
  </li>
  <li>위와 같이 지정 할 수 있으며, 해당 애노테이션 코드를 자바에서 사용 하려면 AnnotationTarger.FIELD를 두번째 대상으로 추가 해야 한다</li>
</ul>

<h3 id="애노테이션-파라미터로-클래스-사용">애노테이션 파라미터로 클래스 사용</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>interface Company {
  val name: String
}

data class CompanyImpl (override val name: String) : Company

data class Person (
  val name: String,
  @DeserializeInterface(CompanyImpl::class) val company: Company
)

annotation class DeserializeInterface(val targetClass: KClass&lt;out Any&gt;)
</code></pre></div></div>

<ul>
  <li>@DeserializeInterface 애노테이션은 인터페이스 타입인 프로퍼티에 대한 역직렬화를 제어할 때 쓰인다</li>
  <li>Person 클래스를 역직렬화 하는 과정에서 company 프로퍼티를 표현하는 JSON을 읽으면 JSON을 역직렬화 하면서 CompanyImpl의 인스턴스를 만들어
Peron의 company 프로퍼티에 설정 한다</li>
  <li>이렇게 역직렬화시 사용할 클래스를 지정하기 위해 애노테이션의 인자로 CompanyImpl::class를 인자로 넘기며, 클래스를 가르키기에 ::class를 붙인다</li>
</ul>

<h3 id="애노테이션-파라미터로-제너릭-클래스-받기">애노테이션 파라미터로 제너릭 클래스 받기</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>interface ValueSerializer&lt;T&gt; {
  fun toJsonValue(value: T) : Any?
  fun fromJsonValue(jsonValue: Any?) : T
}

data class Person( 
  val name: String,
  @CustomSerializer(DateSerializer::class) val birthDate: Date
}

annotation class CustomSerializer(
  val serializerClass: KClass&lt;out ValueSerializer&lt;*&gt;&gt;
)
</code></pre></div></div>

<ul>
  <li>@CustomSerializer 애노테이션은 커스텀 직렬화 클래스에 대한 참조를 인자로 받는다</li>
  <li>이 직렬화 클래스는 ValueSerializer 인터페이스를 구현 해야만 하며, 이 애노테이션이 어떤 타입에 쓰일지 알 수 없으므로 스타프로젝션을 사용한다</li>
</ul>
 
    </div>

    <div id="disqus_thread"></div>

</article>
<script>
    var disqus_config = function () {
        this.page.url = "https://yoowonyoung.github.io/kotlin/study/2019/09/04/Kotlin-18/"; /* Replace PAGE_URL with your page's canonical URL variable */
        this.page.identifier = "/kotlin/study/2019/09/04/Kotlin-18"; /* Replace PAGE_IDENTIFIER with your page's unique identifier variable */
    };


    (function () { /* DON'T EDIT BELOW THIS LINE */
        var d = document,
            s = d.createElement('script');
        s.src = 'https://.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the
    <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
</noscript></div>
<div class="col-lg-4">
    <div class="card">
        <div class="card-header"> About </div>
        <div class="card-body text-dark">
            <!-- Your Bio -->
            <p> I'm a software Engineer and amateur photographer</p><!-- Place this tag where you want the button to render. -->
<a class="github-button" href="https://github.com/sujaykundu777/devlopr-jekyll" data-size="large" data-show-count="true" aria-label="Star sujaykundu777/devlopr-jekyll on GitHub">Star</a></div>
    </div>
    <div class="card">
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <!-- sidebar-horizontal-1 -->
        <ins class="adsbygoogle"
             style="display:block"
             data-ad-client="ca-pub-7259836434848202"
             data-ad-slot="7549410045"
             data-ad-format="auto"
             data-full-width-responsive="true"></ins>
        <script>
             (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
    </div>
    <div class="card">
        <div class="card-header">Categories </div>
        <div class="card-body text-dark">
             
            <div id="#guides"></div>
            <li class="tag-head">
                <a href="/devlopr-starter/blog/categories/guides">guides</a>
            </li>
            <a name="guides"></a>

             
            <div id="#kotlin"></div>
            <li class="tag-head">
                <a href="/devlopr-starter/blog/categories/kotlin">kotlin</a>
            </li>
            <a name="kotlin"></a>

             
            <div id="#study"></div>
            <li class="tag-head">
                <a href="/devlopr-starter/blog/categories/study">study</a>
            </li>
            <a name="study"></a>

             
            <div id="#jekyll"></div>
            <li class="tag-head">
                <a href="/devlopr-starter/blog/categories/jekyll">jekyll</a>
            </li>
            <a name="jekyll"></a>

            </div>
    </div>
</div></div> <!-- End of row-->
    

    

        </div>
<footer>

    <p> Powered by<a href="https://devlopr.netlify.com/readme"> devlopr jekyll</a>. Hosted at <a href="https://pages.github.com">Github</a>. Subscribe via
        <a href="/devlopr-starter /feed.xml ">RSS</a>
    </p>

</footer>
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
</div>
</body>

<div hidden id="snipcart" data-api-key="Y2I1NTAyNWYtMTNkMy00ODg0LWE4NDItNTZhYzUxNzJkZTI5NjM3MDI4NTUzNzYyMjQ4NzU0"></div>
<script src="https://cdn.snipcart.com/themes/v3.0.0-beta.3/default/snipcart.js" defer></script>
</html>
