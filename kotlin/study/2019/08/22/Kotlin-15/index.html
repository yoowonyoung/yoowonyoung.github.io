<!DOCTYPE html>
<html lang=" en "><head>
  <meta charset="utf-8">
  <title>Wonyoung yoo - Software Engineer</title>
  <meta http-equip="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Software Engineer and Amateur Photographer">
  <link rel="stylesheet" href="https://yoowonyoung.github.io/devlopr-starter/assets/css/main.css" />
  <link rel="stylesheet" href="https://yoowonyoung.github.io/devlopr-starter/assets/css/custom-style.css" />
  <link rel="icon" href="https://yoowonyoung.github.io/devlopr-starter/assets/img/favicon.ico" type="image/gif" sizes="16x16">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
    integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
    crossorigin="anonymous"></script>
  <script async defer src="https://buttons.github.io/buttons.js"></script>
  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css"
    integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css"
    integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">
  <!-- Including Snipcart -->
  <link rel="stylesheet" href="https://cdn.snipcart.com/themes/v3.0.0-beta.3/default/snipcart.css" />
  <!-- Including InstantSearch.js library and styling -->
  <script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.20.1/moment.min.js"></script>
  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">
  <link rel="stylesheet" type="text/css"
    href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch.min.css">
  <link rel="stylesheet" type="text/css"
    href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.6.0/dist/instantsearch-theme-algolia.min.css">
  <script>
    (function (d, h, m) {
      var js, fjs = d.getElementsByTagName(h)[0];
      if (d.getElementById(m)) { return; }
      js = d.createElement(h); js.id = m;
      js.onload = function () {
        window.makerWidgetComInit({
          position: "right",
          widget: "ofeeof264otl2l5g-zspk40eq2gaomj2n-higi2qphmveubksi"
        })
      };
      js.src = "https://makerwidget.com/js/embed.js";
      fjs.parentNode.insertBefore(js, fjs)
    }(document, "script", "dhm"))
  </script>

  

</head><body>
    <div class="container-fluid"><header>

    <div class="col-lg-12">
        <div class="row">
            <div class="col-md-2 center">
                <a href="/">
                    <img src="/assets/img/profile.jpg" class="profile-img">
                </a>
            </div>
          
            <div class="col-md-4" id="author_details">
                <h1 class="profile-name"> Wonyoung yoo</h1>
                <p class="profile-bio"> Software Engineer</p>
                <p class="profile-links">
                    
                    
                    
                    <a class="social-link" href="http://instagram.com/dnjsdud0105">
                        <i class="fab fa-instagram"></i>
                    </a>
                    
                    
                    
                    <a class="social-link" href="http://github.com/yoowonyoung">
                        <i class="fab fa-github"></i>
                    </a>
                    
                    
                    
                    <a class="social-link" href="http://linkedin.com/in/원영-유-2b2147121">
                        <i class="fab fa-linkedin-in"></i>
                    </a>
                    
                    
                </p>

            </div>
            <div class="col-md-6 center">
     
                    <ul class="nav justify-content-end" id="navigation">
                    
                    <li class="nav-item">
                        <a class="nav-link" href="/">About</a>
                    </li>
                     
                    <li class="nav-item">
                        <a class="nav-link" href="/blog">Blog</a>
                    </li>
                     
                    <li class="nav-item">
                        <a class="nav-link" href="/shop">Shop</a>
                    </li>
                     
                    <li class="nav-item">
                        <a class="nav-link" href="/sample-page">Sample Page</a>
                    </li>
                     
                    <li class="nav-item">
                        <a class="nav-link" href="/contact">Contact Me</a>
                    </li>
                     
                     <li class="nav-item">
                         <a class="nav-link" href="https://yoowonyoung.github.io/search/"><i class="fa fa-search" aria-hidden="true"></i></a>
                     </li>
                     <li class="nav-item">
                         <button class="header__checkout snipcart-checkout">

                                <svg width="31" height="27" viewBox="0 0 31 27" fill="none" xmlns="http://www.w3.org/2000/svg">
                                  <path
                                    d="M1.10512 0.368718C0.560256 0.368718 0.118164 0.812066 0.118164 1.35848C0.118164 1.9049 0.560256 2.34824 1.10512 2.34824H4.90887L8.30138 18.4009C8.43503 19.0053 8.83085 19.5079 9.32946 19.5041H25.7788C26.3005 19.5118 26.7799 19.0375 26.7799 18.5143C26.7799 17.9911 26.3006 17.5168 25.7788 17.5245H10.1315L9.71003 15.545H27.095C27.5371 15.5412 27.9547 15.2048 28.0511 14.7718L30.354 4.87412C30.4825 4.29933 29.9852 3.67172 29.3979 3.66786H7.21171L6.6771 1.15221C6.58329 0.71276 6.15921 0.368652 5.7107 0.368652L1.10512 0.368718ZM7.623 5.64746H12.7634L13.2569 8.61674H8.25005L7.623 5.64746ZM14.7785 5.64746H20.9881L20.4946 8.61674H15.2719L14.7785 5.64746ZM23.0031 5.64746H28.1537L27.4649 8.61674H22.5097L23.0031 5.64746ZM8.67181 10.5963H13.5862L14.0797 13.5656H9.29919L8.67181 10.5963ZM15.6009 10.5963H20.1656L19.6721 13.5656H16.0944L15.6009 10.5963ZM22.1807 10.5963H27.0023L26.3135 13.5656H21.6872L22.1807 10.5963ZM12.6197 20.164C10.8141 20.164 9.32979 21.6525 9.32979 23.4632C9.32979 25.2739 10.8141 26.7624 12.6197 26.7624C14.4252 26.7624 15.9095 25.2739 15.9095 23.4632C15.9095 21.6525 14.4252 20.164 12.6197 20.164ZM22.4892 20.164C20.6837 20.164 19.1994 21.6525 19.1994 23.4632C19.1994 25.2739 20.6837 26.7624 22.4892 26.7624C24.2948 26.7624 25.7791 25.2739 25.7791 23.4632C25.7791 21.6525 24.2948 20.164 22.4892 20.164ZM12.6197 22.1435C13.3586 22.1435 13.9356 22.7222 13.9356 23.4632C13.9356 24.2042 13.3586 24.7829 12.6197 24.7829C11.8807 24.7829 11.3037 24.2042 11.3037 23.4632C11.3037 22.7222 11.8807 22.1435 12.6197 22.1435ZM22.4892 22.1435C23.2282 22.1435 23.8052 22.7222 23.8052 23.4632C23.8052 24.2042 23.2282 24.7829 22.4892 24.7829C21.7503 24.7829 21.1733 24.2042 21.1733 23.4632C21.1733 22.7222 21.7503 22.1435 22.4892 22.1435Z"
                                    fill="#9094FF" class="header__checkout-fill"></path>
                                </svg>
                                <span class="snipcart-items-count"></span>
                                <!-- <span class="snipcart-total-price"></span> -->
                              </button>
                        </li>
                    </ul>
      
            </div>
        </div>
    </div>

</header><div class="col-lg-12">
          
            <!-- Blog Post Breadcrumbs --><nav aria-label="breadcrumb" role="navigation">
        <ol class="breadcrumb">
            <li class="breadcrumb-item">
                <a href="/blog">Blog</a>
            </li>
            <li class="breadcrumb-item">
                <a href="/blog/categories">Categories</a>
            </li>
            <li class="breadcrumb-item active" aria-current="page">Kotlin Study - 08 고차 함수: 파라미터와 반환 값으로 람다 사용 -2</li>
        </ol>
    </nav>
<div class="row">

        <div class="col-lg-8"><article class="card" itemscope itemtype="http://schema.org/BlogPosting">
    <div class="card-header">
        <!-- <h1 class="post-title" itemprop="name headline">Kotlin Study - 08 고차 함수: 파라미터와 반환 값으로 람다 사용 -2</h1> -->
        <h4 class="post-meta"></h4>
        <p class="post-summary">Posted by :  at
            <time datetime="2019-08-22 20:25:00 +0000" itemprop="datePublished">Aug 22, 2019</time>
        </p>
        <span class="disqus-comment-count" data-disqus-identifier="/kotlin/study/2019/08/22/Kotlin-15/"></span>     
        <div class="post-categories">
            
            Category : 
            <a href="/devlopr-starter/blog/categories/kotlin">kotlin</a>
            &nbsp; 
            <a href="/devlopr-starter/blog/categories/study">study</a>
             
        </div>
    </div>

    <div class="card-body" itemprop="articleBody">
        <img class="card-img-top" src="/assets/img/posts/" alt=""> 
        <br/> <br/>
        <h1 id="고차-함수-파라미터와-반환-값으로-람다-사용">고차 함수: 파라미터와 반환 값으로 람다 사용</h1>

<h2 id="고차-함수-정의">고차 함수 정의</h2>

<h3 id="함수를-함수에서-반환">함수를 함수에서 반환</h3>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>enum class Delivery { STANDARD, EXPEDITED }
class Order(val itemCount: Int) 
fun getShinppingCostCalculator( delivery: Delivery ) : (Order) -&gt; Double {
  if(delivery == Delivery.EXPEDITED) {
    return { order -&gt; 6 + 2.1*order.itemCount }
  }
  return { order -&gt; 1.2*order.itemCount }
}

val calculator = getShippingCostCalculator(Delivery.EXPEDITED)
</code></pre></div></div>

<ul>
  <li>프로그램의 상태나 다른 조건에 따라서 달라 질 수 있는 로직이 있다면, 함수를 반환하는 함수가 유용 하다</li>
  <li>함수를 반환하는 함수를 정의 하려면 반환 타입으로 함수를 정의 해야 한다</li>
  <li>위의 코드는 Order를 받아서 Double을 반환하는 함수를 반환한다</li>
  <li>함수를 반환 하려면 return 식에 람다나 멤버 참조나 함수 타입의 값을 계산하는 식등을 넣으면 된다</li>
</ul>

<h3 id="람다를-활용한-중복-제거">람다를 활용한 중복 제거</h3>
<ul>
  <li>코드의 중복을 줄일 떄 함수 타입이 상당히 많은 도움이 된다</li>
  <li>코드의 일부분을 복사해 붙여 넣고 싶은 경우가 있다면 그 코드를 람다로 만들면 중복을 제거 할 수 있다</li>
</ul>

<h2 id="인라인-함수-람다의-부가-비용-없애기">인라인 함수: 람다의 부가 비용 없애기</h2>

<h3 id="인라이닝이-작동하는-방식">인라이닝이 작동하는 방식</h3>
<ul>
  <li>어떤 함수를 inline으로 선언 하면 그 함수의 본문이 인라인 된다</li>
  <li>함수를 호출하는 코드를, 함수를 호출하는 바이트 코드 대신 본문을 번역한 바이트 코드로 컴파일 되는 것이다</li>
  <li>함수 본문 뿐만 아니라 함수와 같이 전달된 람다도 함께 인라인 된다</li>
  <li>한 인라인 함수를 두곳에서 각각 다른 람다를 사용해 호출 한다면 두 호출은 각각 따로 인라이닝 된다</li>
</ul>

<h3 id="인라인-함수의-한계">인라인 함수의 한계</h3>
<ul>
  <li>함수가 인라이닝 될때 람다 식의 본문이 그 함수에 직접 펼쳐지기 때문에, 함수가 파라미터로 전달받은 람다를 본문에 쓰는 방식이 제한된다</li>
  <li>일반적으로 함수의 본문에서 람다식을 바로 호출 하거나, 람다를 인자로 전달받아 바로 호출 하는 경우에는 람다도 같이 인라이닝 할 수 있다</li>
  <li>그 이외의 경우에는 인라이닝이 되지 않는다</li>
  <li>둘 이상의 람다를 인자로 받는 함수에서 일부 람다만 인라이닝 하고 싶은 경우, noinline 변경자를 파라미터 이름에 붙여 인라이닝을 금지 할 수 있다</li>
</ul>

<h3 id="컬렉션-연산-인라이닝">컬렉션 연산 인라이닝</h3>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>data class PErson(val name: String, val age: Int) 
val pepole listOf(Person("Alice",29), Person("Bob",31))
println(people.filter { it.age &lt; 30 })
==&gt; [Person(name=Alice,age=29)]
</code></pre></div></div>

<ul>
  <li>코틀린의 filter 함수는 인라인 함수 이다</li>
  <li>따라서 filter 함수의 바이트 코드는 그 함수에 전달된 람다 본문의 바이트 코드와 함께 filter를 호출한 위치에 들어간다</li>
  <li>하지만 asSequence와 같은 시퀀스 연산에서는 람다가 인라이닝 되지 않는점에 주의 해야 한다</li>
</ul>

<h3 id="함수를-인라인으로-선언-해야-하는-경우">함수를 인라인으로 선언 해야 하는 경우</h3>
<ul>
  <li>일반 함수 호출의 경우 이미 JVM이 강력하게 인라이닝을 한다(JIT 에서 인라이닝을 한다)</li>
  <li>하지만 코틀린의 인라인 함수는 바이트 코드에서 각 함수 호출 지점을 본문으로 대체 하기 때문에 코드 중복이 발생 한다</li>
  <li>하지만 람다를 인자로 받는 함수를 인라이닝 할 경우 아래와 같은 이점이 있다
    <ul>
      <li>인라이닝을 통해 함수 호출 비용, 람다를 표현하는 객체를 만드는 비용, 람다 인스턴스에 해당하는 객체를 만드는 비용을 줄일 수 있다</li>
      <li>JVM은 함수 호출과 람다를 인라이닝 할 수 없다</li>
      <li>람다를 인라이닝 할 경우 non-local 반환이 가능 해진다</li>
    </ul>
  </li>
  <li>하지만 인라이닝 하는 함수가 아주 큰 경우에는 바이트 코드가 매우 커진다는 단점이 있다</li>
</ul>

<h2 id="고차-함수-안에서-흐름-제어">고차 함수 안에서 흐름 제어</h2>

<h3 id="람다-안의-return문-람다를-둘러싼-함수로부터-반환">람다 안의 return문: 람다를 둘러싼 함수로부터 반환</h3>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>fun lookForAlice(people: List&lt;Person&gt;) {
  people.forEach {
    if(it.name == "Alice") {
      reutn 
    }
  }
}
</code></pre></div></div>

<ul>
  <li>람다 안에서 return을 사용 하면 람다로 부터만 반환 되는것이 아니라 그 람다를 호출 하는 함수가 실행을 끝내고 반환 된다</li>
  <li>이렇게 자신을 둘러 싸고 있는 블록 보다 더 바깥에 있는 다른 블록을 반환하게 만드는 return문을 non-local return 이라고 부른다</li>
  <li>이렇게 return이 바깥쪽 함수를 반환 할 수 있는 경우는 람다를 인자로 받는 함수가 인라인 일 떄 뿐이다</li>
</ul>

<h3 id="람다로부터-반환-레이블을-사용한-return">람다로부터 반환: 레이블을 사용한 return</h3>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>fun lookForAlice(people: List&lt;Person&gt;) {
  people.forEach lable@{
    if(it.name == "Alice") {
      reutn@label
    }
  }
}
</code></pre></div></div>

<ul>
  <li>람다에 label을 붙여 local return 즉, 람다의 실행을 끝내고 람다를 호출 했던 코드의 실행을 이어 갈 수 있다</li>
  <li>return으로 실행을 끝내고 싶은 람다 식 앞에 레이블을 붙이고 return 키워드 뒤에 그 레이블을 추가 하면 된다</li>
  <li>람다에 레이블을 붙여서 사용하는 방법 이외에도, 람다를 인자로 받는 인라인 함수의 이름을 return 뒤에 레이블로 붙여서 쓸 수도 있다</li>
  <li>람다 식에는 레이블이 2개 이상 붙을 수 없다</li>
</ul>

<h3 id="무명-함수-기본적으로-local-return">무명 함수: 기본적으로 local return</h3>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>fun lookForAlice(people: List&lt;Person&gt;) {
  people.forEach(fun (person) {
    if(it.name == "Alice") return
  })
}
</code></pre></div></div>

<ul>
  <li>무명 함수는 함수 이름이나 파라미터 타입을 생략 할 수 있다는 것 이외에 일반 함수와 비슷 하다</li>
  <li>식을 본문으로 하는 무명 함수는 반환 타입도 생략 가능 하다</li>
  <li>무명 함수 안에서 레이블이 붙지 않는 return 식은 무명 함수 자체를 반환 시킬 뿐, 무명 함수를 둘러싼 다른 함수를 반환 하지 않는다</li>
</ul>

<h2 id="요약">요약</h2>
<ul>
  <li>함수 타입을 사용해 함수에 대한 참조를 담는 변수나 파라미터나 반환값 들을 만들 수 있다</li>
  <li>고차 함수는 다른 함수를 인자로 받거나 함수를 반환 한다</li>
  <li>인라인 함수를 컴파일 할 떄 컴파일러는 그 함수의 본문과 그 함수에게 전달된 람다의 본문을 컴파일한 바이트코드를  모든 함수 호출 지점에 삽입 한다</li>
  <li>고차 함수를 사용 하면 컴포넌트를 이루는 각 부분의 코드를 더 잘 재활용 할 수 있다</li>
  <li>인라인 함수에서는 람다 안에 있는 return 문이 바깥쪽 함수를 반환 시키는 넌로컬 return을 사용 할 수 있다</li>
  <li>무명 함수는 람다 식을 대신 할 수 있으며, return 이 로컬 return 이다</li>
</ul>
 
    </div>

    <div id="disqus_thread"></div>

</article>
<script>
    var disqus_config = function () {
        this.page.url = "https://yoowonyoung.github.io/kotlin/study/2019/08/22/Kotlin-15/"; /* Replace PAGE_URL with your page's canonical URL variable */
        this.page.identifier = "/kotlin/study/2019/08/22/Kotlin-15"; /* Replace PAGE_IDENTIFIER with your page's unique identifier variable */
    };


    (function () { /* DON'T EDIT BELOW THIS LINE */
        var d = document,
            s = d.createElement('script');
        s.src = 'https://.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the
    <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
</noscript></div>
<div class="col-lg-4">
    <div class="card">
        <div class="card-header"> About </div>
        <div class="card-body text-dark">
            <!-- Your Bio -->
            <p> I'm a software Engineer and amateur photographer</p><!-- Place this tag where you want the button to render. -->
<a class="github-button" href="https://github.com/sujaykundu777/devlopr-jekyll" data-size="large" data-show-count="true" aria-label="Star sujaykundu777/devlopr-jekyll on GitHub">Star</a></div>
    </div>
    <div class="card">
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <!-- sidebar-horizontal-1 -->
        <ins class="adsbygoogle"
             style="display:block"
             data-ad-client="ca-pub-7259836434848202"
             data-ad-slot="7549410045"
             data-ad-format="auto"
             data-full-width-responsive="true"></ins>
        <script>
             (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
    </div>
    <div class="card">
        <div class="card-header">Categories </div>
        <div class="card-body text-dark">
             
            <div id="#guides"></div>
            <li class="tag-head">
                <a href="/devlopr-starter/blog/categories/guides">guides</a>
            </li>
            <a name="guides"></a>

             
            <div id="#kotlin"></div>
            <li class="tag-head">
                <a href="/devlopr-starter/blog/categories/kotlin">kotlin</a>
            </li>
            <a name="kotlin"></a>

             
            <div id="#study"></div>
            <li class="tag-head">
                <a href="/devlopr-starter/blog/categories/study">study</a>
            </li>
            <a name="study"></a>

             
            <div id="#jekyll"></div>
            <li class="tag-head">
                <a href="/devlopr-starter/blog/categories/jekyll">jekyll</a>
            </li>
            <a name="jekyll"></a>

            </div>
    </div>
</div></div> <!-- End of row-->
    

    

        </div>
<footer>

    <p> Powered by<a href="https://devlopr.netlify.com/readme"> devlopr jekyll</a>. Hosted at <a href="https://pages.github.com">Github</a>. Subscribe via
        <a href="/devlopr-starter /feed.xml ">RSS</a>
    </p>

</footer>
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
</div>
</body>

<div hidden id="snipcart" data-api-key="Y2I1NTAyNWYtMTNkMy00ODg0LWE4NDItNTZhYzUxNzJkZTI5NjM3MDI4NTUzNzYyMjQ4NzU0"></div>
<script src="https://cdn.snipcart.com/themes/v3.0.0-beta.3/default/snipcart.js" defer></script>
</html>
